From cc96f8a022010c7dc04334ac776a9c6a31a6b042 Mon Sep 17 00:00:00 2001
From: slitaz-cn <teasiu@163.com>
Date: Tue, 30 Mar 2021 14:30:01 +0800
Subject: [PATCH 1/5] set default name ecoo in luci

Signed-off-by: slitaz-cn <teasiu@163.com>
---
 modules/luci-base/luasrc/dispatcher.lua   | 2 +-
 modules/luci-base/luasrc/view/sysauth.htm | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/modules/luci-base/luasrc/dispatcher.lua b/modules/luci-base/luasrc/dispatcher.lua
index 8105ba0bb..c0b0cb1cc 100644
--- a/modules/luci-base/luasrc/dispatcher.lua
+++ b/modules/luci-base/luasrc/dispatcher.lua
@@ -884,7 +884,7 @@ function dispatch(request)
 				http.status(403, "Forbidden")
 				http.header("X-LuCI-Login-Required", "yes")
 
-				local scope = { duser = "root", fuser = user }
+				local scope = { duser = "ecoo", fuser = user }
 				local ok, res = util.copcall(tpl.render_string, [[<% include("themes/" .. theme .. "/sysauth") %>]], scope)
 				if ok then
 					return res
diff --git a/modules/luci-base/luasrc/view/sysauth.htm b/modules/luci-base/luasrc/view/sysauth.htm
index 0bca0af5e..c25d8d1cd 100644
--- a/modules/luci-base/luasrc/view/sysauth.htm
+++ b/modules/luci-base/luasrc/view/sysauth.htm
@@ -22,7 +22,7 @@
 			<div class="cbi-value">
 				<label class="cbi-value-title"><%:Username%></label>
 				<div class="cbi-value-field">
-					<input class="cbi-input-text" type="text" name="luci_username" value="<%=duser%>" />
+					<input class="cbi-input-text" type="text" name="luci_username" value="" />
 				</div>
 			</div>
 			<div class="cbi-value cbi-value-last">
-- 
2.25.1

